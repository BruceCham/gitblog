---
layout: default
title: 加载动画
---
<link rel="stylesheet" href="/gitblog/css/loading/loading.css">
<div style="padding:5px 10px;cursor: pointer;height:30px;margin: 20px auto;background:green;border-radius:4px;" id="btn">点击显示加载动画</div>
<div id="loadId" style="text-align:center;padding:5px;"></div>
<script type="text/javascript" src="/gitblog/lib/jquery-2.0.3.min.js"></script>
<script>
;(function($) {
	$.extend({
        "ajaxFn":function(options){  
            ops=$.extend({  
                type : "get",
                url: "",
                data : {},
                dataType: 'json',
                loadId : "",
                error: function(e){
                	alert("网络接口出错");
  					$(ops.loadId).html("加载失败，请稍后重试");
                },
                fail: function(e){
                	alert("网络接口出错");
  					$(ops.loadId).html("加载失败，请稍后重试");
                },
                layoutStr: '<div id="hb-layout" class="ui-layoutBox"><div class="ui-loadingBody"><div class="ui-loadingBox"></div><p>加载中</p></div></div>',
                closeLayout : function(){
                	$("#hb-layout").remove();	
                },
                showLayout: function(){
                	$("body").append(this.layoutStr);
                }
            },options);
            ops.showLayout();
            $.ajax({
              type: ops.type,
              url: ops.url,
              data: ops.data,
              dataType: ops.dataType,
              success : function(res){
              	setTimeout(function(){
              		ops.closeLayout.call(this);
                  	typeof ops.success !== "undefined" && ops.success.call(this, res);
              	},2000)
              },
              error: function(e){
                  ops.closeLayout.call(this);
                  typeof ops.error !== "undefined" && ops.error.call(this, e);
              },
              fail: function(e){
	              ops.closeLayout.call(this);
	              typeof ops.fail !== "undefined" && ops.fail.call(this, e);
              }
            });
            return this; 
          }  
      });
})(jQuery);
</script>
<script>
	$("#btn").click(function(){
		$("#loadId").html("");
		$.ajaxFn({
			type:'get',
			url:"/gitblog/json/index/h5list.json",
			dataType: "json",
			loadId:"loadId",
			success: function(res){
				$("#loadId").html("弹出层已经关闭了")
			}
		})
	})
</script>